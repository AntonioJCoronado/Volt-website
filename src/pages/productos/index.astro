---
import MainLayout from "../../layouts/MainLayout.astro";
import ProductsGrid from "../../components/react/ProductsGrid";
import { categories, products } from "../../data/product-catalog";

// Obtener parámetros de la URL
const categoria = Astro.url.searchParams.get("categoria") || "todos";
const subcategoria = Astro.url.searchParams.get("subcategoria") || "todos";
const paginaParam = Astro.url.searchParams.get("pagina") || "1";
const currentPage = parseInt(paginaParam) || 1;
---

<MainLayout
  title="Productos"
  description="VOLT - Categoría de productos"
  currentPage="productos"
>
  <section class="products-hero">
    <div class="bubbles">
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
    </div>
    <div class="container">
      <h1 class="title">
        <span class="title-dark">NUESTROS</span>
        <span class="title-blue">PRODUCTOS</span>
      </h1>
      <p class="subtitle">
        ¡Explora nuestra amplia gama de productos tecnológicos y más!
      </p>
    </div>
  </section>

  <ProductsGrid
    client:load
    initialProducts={products}
    categories={categories}
    initialCategory={categoria}
    initialSubcategory={subcategoria}
    initialPage={currentPage}
  />
</MainLayout>
